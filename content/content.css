/**
 * Claude Chat Width Customizer - Base Content Styles
 * ===================================================
 *
 * Version 1.8.2 - Technical Debt Remediation
 *
 * The JavaScript content script handles all width adjustments using inline styles.
 * This CSS file provides smooth transitions for elements that have been
 * explicitly marked by the JavaScript, with accessibility support.
 *
 * Enhanced Styling (v1.8.0):
 * - Typography transitions (font-size, line-height, padding)
 * - Code block transitions (max-height, collapse/expand)
 * - Visual element transitions (opacity for show/hide)
 *
 * @author DoubleGate
 * @version 1.8.2
 */

/*
 * Smooth transition ONLY for elements marked by our extension.
 * The data-claude-width-applied attribute is added by JavaScript
 * after verifying the element is NOT in the sidebar.
 */
[data-claude-width-applied] {
    transition: max-width 0.2s ease-out, width 0.2s ease-out;
}

/* =========================================================================
   ENHANCED STYLING: Transitions for Dynamic Style Changes (v1.8.0)
   ========================================================================= */

/**
 * Typography transitions for smooth font-size, line-height, and padding changes.
 * Applied to message containers and chat elements.
 */
[data-claude-enhanced-applied] {
    transition:
        font-size 0.2s ease-out,
        line-height 0.2s ease-out,
        padding 0.2s ease-out,
        margin 0.2s ease-out;
}

/**
 * Code block transitions for max-height and collapse animations.
 * Enables smooth expand/collapse behavior.
 */
[data-claude-enhanced-applied] pre,
[data-claude-enhanced-applied] code {
    transition:
        max-height 0.3s ease-out,
        overflow 0.3s ease-out;
}

/**
 * Visual element transitions for smooth show/hide of timestamps and avatars.
 */
[data-claude-enhanced-applied] [class*="timestamp" i],
[data-claude-enhanced-applied] [class*="avatar" i] {
    transition: opacity 0.2s ease-out, visibility 0.2s ease-out;
}

/**
 * Message bubble style transitions for border-radius and background changes.
 */
[data-claude-enhanced-applied] [class*="message" i] {
    transition:
        border-radius 0.2s ease-out,
        background-color 0.2s ease-out,
        border-color 0.2s ease-out;
}

/* =========================================================================
   ACCESSIBILITY: Reduced Motion Support
   ========================================================================= */

/**
 * Respect user's motion preferences.
 * Users with vestibular disorders or motion sensitivity may have
 * prefers-reduced-motion enabled in their OS settings.
 */
@media (prefers-reduced-motion: reduce) {
    [data-claude-width-applied],
    [data-claude-enhanced-applied],
    [data-claude-enhanced-applied] pre,
    [data-claude-enhanced-applied] code,
    [data-claude-enhanced-applied] [class*="timestamp" i],
    [data-claude-enhanced-applied] [class*="avatar" i],
    [data-claude-enhanced-applied] [class*="message" i] {
        transition: none !important;
    }
}

/* =========================================================================
   ACCESSIBILITY: High Contrast Mode Support
   ========================================================================= */

/**
 * Support Windows High Contrast Mode (forced-colors).
 * Ensures our styled elements remain visible and functional
 * when users have high contrast themes enabled.
 */
@media (forced-colors: active) {
    [data-claude-width-applied] {
        /* Let system colors take precedence */
        forced-color-adjust: auto;
    }
}
