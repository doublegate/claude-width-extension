<!DOCTYPE html>
<!--
  Claude Chat Width Customizer - Popup Interface
  ===============================================

  This popup provides the user interface for adjusting chat width preferences.
  Accessible via the browser toolbar icon when visiting claude.ai.

  Features:
  - Slider control for width selection (40-100%)
  - Real-time preview of changes
  - Visual percentage display
  - Quick preset buttons for common widths
  - Custom preset management (create, edit, delete, favorites)
  - Recently used widths
  - Reset to default option
  - Full keyboard accessibility
  - Screen reader support

  Keyboard Shortcuts (when popup is open):
  - 1: Select Narrow (50%)
  - 2: Select Medium (70%)
  - 3: Select Wide (85%)
  - 4: Select Full (100%)
  - R: Reset to default (85%)
  - Escape: Close popup
  - Tab: Navigate between controls

  @author DoubleGate
  @version 1.8.2
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Chat Width</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="popup-container" role="application" aria-label="Claude Chat Width Customizer">
        <!-- Screen Reader Live Region (visually hidden) -->
        <div id="srAnnouncements" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>

        <!-- Header Section -->
        <header class="popup-header">
            <div class="logo-wrapper">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h1 class="popup-title" id="popupTitle">Claude.AI Chat Width</h1>
            </div>
            <span class="version-badge" aria-label="Version 1.8.2">v1.8.2</span>
        </header>

        <!-- Status Indicator -->
        <div class="status-bar" id="statusBar" role="status" aria-live="polite">
            <span class="status-dot" id="statusDot" aria-hidden="true"></span>
            <span class="status-text" id="statusText">Checking...</span>
            <span class="non-default-indicator" id="nonDefaultIndicator" aria-label="Width differs from default" title="Width differs from default (85%)" hidden>
                <svg viewBox="0 0 8 8" fill="currentColor" aria-hidden="true">
                    <circle cx="4" cy="4" r="4"/>
                </svg>
            </span>
        </div>

        <!-- Theme Toggle -->
        <div class="theme-section">
            <span class="theme-label" id="themeLabel">Theme</span>
            <div class="theme-toggle" role="radiogroup" aria-labelledby="themeLabel">
                <button class="theme-btn"
                        data-theme="light"
                        title="Light theme"
                        role="radio"
                        aria-checked="false"
                        aria-label="Light theme">
                    <svg class="theme-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                        <path d="M8 1V2M8 14V15M15 8H14M2 8H1M12.95 12.95L12.24 12.24M3.76 3.76L3.05 3.05M12.95 3.05L12.24 3.76M3.76 12.24L3.05 12.95M11 8C11 9.65685 9.65685 11 8 11C6.34315 11 5 9.65685 5 8C5 6.34315 6.34315 5 8 5C9.65685 5 11 6.34315 11 8Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Light</span>
                </button>
                <button class="theme-btn"
                        data-theme="dark"
                        title="Dark theme"
                        role="radio"
                        aria-checked="false"
                        aria-label="Dark theme">
                    <svg class="theme-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                        <path d="M14 8.5C14 11.5376 11.5376 14 8.5 14C5.96243 14 3.83547 12.3055 3.18141 10C3.06066 9.57066 3 9.11936 3 8.65217C3 5.44784 5.68385 2.84058 9 2.84058C9.10345 2.84058 9.20621 2.8433 9.30823 2.84866C8.49042 3.74759 8 4.95012 8 6.26087C8 9.03201 10.2437 11.2757 13.0149 11.2757C13.3558 11.2757 13.6874 11.2427 14.0074 11.1797C14.0025 11.2863 14 11.393 14 11.5V8.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Dark</span>
                </button>
                <button class="theme-btn active"
                        data-theme="system"
                        title="System theme"
                        role="radio"
                        aria-checked="true"
                        aria-label="System theme (follows operating system)">
                    <svg class="theme-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                        <path d="M2 4C2 3.44772 2.44772 3 3 3H13C13.5523 3 14 3.44772 14 4V10C14 10.5523 13.5523 11 13 11H3C2.44772 11 2 10.5523 2 10V4Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M5 14H11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M8 11V14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    <span>System</span>
                </button>
            </div>
        </div>

        <!-- Main Controls -->
        <main class="popup-main" aria-labelledby="popupTitle">
            <!-- Width Display -->
            <div class="width-display" aria-hidden="true">
                <span class="width-value" id="widthValue">85</span>
                <span class="width-unit">%</span>
            </div>

            <!-- Slider Control -->
            <div class="slider-container">
                <label for="widthSlider" class="sr-only">Chat width percentage</label>
                <span id="sliderDescription" class="sr-only">
                    Adjust the width of the chat area from 40% to 100%. Use arrow keys to fine-tune, Page Up/Down for larger jumps.
                </span>
                <input
                    type="range"
                    id="widthSlider"
                    class="width-slider"
                    min="40"
                    max="100"
                    value="85"
                    step="5"
                    aria-label="Chat width percentage"
                    aria-describedby="sliderDescription"
                    aria-valuemin="40"
                    aria-valuemax="100"
                    aria-valuenow="85"
                    aria-valuetext="85 percent"
                >
                <div class="slider-labels" aria-hidden="true">
                    <span>40%</span>
                    <span>85%</span>
                    <span>100%</span>
                </div>
            </div>

            <!-- Built-in Preset Buttons -->
            <div class="presets-section">
                <span class="presets-label" id="presetsLabel">Quick Presets</span>
                <span id="presetsDescription" class="sr-only">
                    Press number keys 1 through 4 to quickly select presets when popup is open.
                </span>
                <div class="presets-grid" role="group" aria-labelledby="presetsLabel" aria-describedby="presetsDescription">
                    <button class="preset-btn"
                            data-width="50"
                            data-preset-id="narrow"
                            title="Narrow width (50%)"
                            aria-label="Narrow preset, 50 percent width. Press 1 for shortcut."
                            aria-pressed="false">
                        <span class="preset-icon narrow" aria-hidden="true"></span>
                        <span>Narrow</span>
                        <span class="preset-shortcut" aria-hidden="true">1</span>
                    </button>
                    <button class="preset-btn"
                            data-width="70"
                            data-preset-id="medium"
                            title="Medium width (70%)"
                            aria-label="Medium preset, 70 percent width. Press 2 for shortcut."
                            aria-pressed="false">
                        <span class="preset-icon medium" aria-hidden="true"></span>
                        <span>Medium</span>
                        <span class="preset-shortcut" aria-hidden="true">2</span>
                    </button>
                    <button class="preset-btn"
                            data-width="85"
                            data-preset-id="wide"
                            title="Wide width (85%)"
                            aria-label="Wide preset, 85 percent width. Press 3 for shortcut."
                            aria-pressed="false">
                        <span class="preset-icon wide" aria-hidden="true"></span>
                        <span>Wide</span>
                        <span class="preset-shortcut" aria-hidden="true">3</span>
                    </button>
                    <button class="preset-btn"
                            data-width="100"
                            data-preset-id="full"
                            title="Full width (100%)"
                            aria-label="Full width preset, 100 percent width. Press 4 for shortcut."
                            aria-pressed="false">
                        <span class="preset-icon full" aria-hidden="true"></span>
                        <span>Full</span>
                        <span class="preset-shortcut" aria-hidden="true">4</span>
                    </button>
                </div>
            </div>

            <!-- Custom Presets Section -->
            <div class="custom-presets-section" id="customPresetsSection">
                <div class="custom-presets-header">
                    <span class="custom-presets-label" id="customPresetsLabel">Custom Presets <span class="preset-count">(0/4)</span></span>
                    <button class="save-current-btn"
                            id="saveCurrentBtn"
                            title="Save current width as a custom preset"
                            aria-label="Save current width as a new custom preset">
                        <svg viewBox="0 0 16 16" fill="none" aria-hidden="true">
                            <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Save Current
                    </button>
                </div>

                <!-- Custom Presets List -->
                <div class="custom-presets-list" id="customPresetsList" role="list" aria-labelledby="customPresetsLabel">
                    <!-- Custom presets will be rendered here dynamically -->
                </div>

                <!-- New Preset Form (hidden by default) -->
                <div class="new-preset-form" id="newPresetForm" hidden>
                    <input type="text"
                           id="newPresetName"
                           class="preset-name-input"
                           placeholder="Preset name (e.g., Reading Mode)"
                           maxlength="20"
                           aria-label="New preset name">
                    <div class="form-actions">
                        <button class="btn btn-small btn-secondary" id="cancelNewPreset" aria-label="Cancel creating preset">
                            Cancel
                        </button>
                        <button class="btn btn-small btn-primary" id="confirmNewPreset" aria-label="Confirm and save preset">
                            Save
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recently Used Section -->
            <div class="recent-section" id="recentlyUsedSection">
                <span class="presets-label" id="recentLabel">Recently Used</span>
                <div class="recent-widths" id="recentlyUsedList" role="group" aria-labelledby="recentLabel">
                    <!-- Recent widths will be rendered here dynamically -->
                    <div class="empty-recent-message" id="emptyRecentMessage">
                        No recent widths yet.
                    </div>
                </div>
            </div>

            <!-- Visual Preview -->
            <div class="preview-section">
                <span class="preview-label" id="previewLabel">Preview</span>
                <div class="preview-container" role="img" aria-labelledby="previewLabel" aria-describedby="previewDescription">
                    <div class="preview-bar" id="previewBar"></div>
                </div>
                <span id="previewDescription" class="sr-only">Visual representation of the selected chat width</span>
            </div>

            <!-- Advanced Styling Section (v1.8.0) -->
            <div class="advanced-section">
                <button class="advanced-toggle" id="advancedToggle" aria-expanded="false" aria-controls="advancedContent">
                    <svg class="toggle-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                        <path d="M6.94 3.94a1.5 1.5 0 012.12 0l4.24 4.24a1.5 1.5 0 010 2.12l-4.24 4.24a1.5 1.5 0 01-2.12-2.12L10.88 8.5 6.94 4.56a1.5 1.5 0 010-2.12z" fill="currentColor"/>
                    </svg>
                    <span>Advanced Styling</span>
                    <span class="advanced-badge">New</span>
                </button>

                <div class="advanced-content" id="advancedContent" hidden>
                    <!-- Typography Section -->
                    <details class="style-section" open>
                        <summary class="section-header" aria-label="Typography settings">
                            <svg class="section-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                                <path d="M2 3H14M4 8H12M6 13H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            Typography
                        </summary>
                        <div class="section-content">
                            <!-- Font Size -->
                            <div class="control-row">
                                <label for="fontSizeSlider" class="control-label">Font Size</label>
                                <div class="control-input">
                                    <input type="range"
                                           id="fontSizeSlider"
                                           class="small-slider"
                                           min="80"
                                           max="120"
                                           value="100"
                                           step="5"
                                           aria-label="Font size percentage">
                                    <span class="control-value" id="fontSizeValue">100%</span>
                                </div>
                            </div>

                            <!-- Line Height -->
                            <div class="control-row">
                                <label class="control-label" id="lineHeightLabel">Line Height</label>
                                <div class="control-buttons" role="radiogroup" aria-labelledby="lineHeightLabel">
                                    <button class="option-btn" data-value="compact" data-setting="lineHeight" role="radio" aria-checked="false">Compact</button>
                                    <button class="option-btn active" data-value="normal" data-setting="lineHeight" role="radio" aria-checked="true">Normal</button>
                                    <button class="option-btn" data-value="relaxed" data-setting="lineHeight" role="radio" aria-checked="false">Relaxed</button>
                                </div>
                            </div>

                            <!-- Message Padding -->
                            <div class="control-row">
                                <label class="control-label" id="paddingLabel">Message Padding</label>
                                <div class="control-buttons" role="radiogroup" aria-labelledby="paddingLabel">
                                    <button class="option-btn" data-value="none" data-setting="messagePadding" role="radio" aria-checked="false">None</button>
                                    <button class="option-btn" data-value="small" data-setting="messagePadding" role="radio" aria-checked="false">Small</button>
                                    <button class="option-btn active" data-value="medium" data-setting="messagePadding" role="radio" aria-checked="true">Medium</button>
                                    <button class="option-btn" data-value="large" data-setting="messagePadding" role="radio" aria-checked="false">Large</button>
                                </div>
                            </div>
                        </div>
                    </details>

                    <!-- Display Mode Section -->
                    <details class="style-section">
                        <summary class="section-header" aria-label="Display mode settings">
                            <svg class="section-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                                <rect x="2" y="3" width="12" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M5 6H11M5 9H9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            Display Mode
                        </summary>
                        <div class="section-content">
                            <div class="control-row">
                                <div class="display-mode-grid" role="radiogroup" aria-label="Display mode">
                                    <button class="mode-btn" data-mode="compact" role="radio" aria-checked="false">
                                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <rect x="4" y="6" width="16" height="2" rx="1" fill="currentColor"/>
                                            <rect x="4" y="10" width="16" height="2" rx="1" fill="currentColor"/>
                                            <rect x="4" y="14" width="16" height="2" rx="1" fill="currentColor"/>
                                            <rect x="4" y="18" width="16" height="2" rx="1" fill="currentColor"/>
                                        </svg>
                                        <span>Compact</span>
                                    </button>
                                    <button class="mode-btn active" data-mode="comfortable" role="radio" aria-checked="true">
                                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <rect x="4" y="4" width="16" height="3" rx="1" fill="currentColor"/>
                                            <rect x="4" y="10" width="16" height="3" rx="1" fill="currentColor"/>
                                            <rect x="4" y="16" width="16" height="3" rx="1" fill="currentColor"/>
                                        </svg>
                                        <span>Comfortable</span>
                                    </button>
                                    <button class="mode-btn" data-mode="spacious" role="radio" aria-checked="false">
                                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <rect x="4" y="3" width="16" height="4" rx="1" fill="currentColor"/>
                                            <rect x="4" y="10" width="16" height="4" rx="1" fill="currentColor"/>
                                            <rect x="4" y="17" width="16" height="4" rx="1" fill="currentColor"/>
                                        </svg>
                                        <span>Spacious</span>
                                    </button>
                                    <button class="mode-btn" data-mode="custom" role="radio" aria-checked="false">
                                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <path d="M12 15.5C12 15.5 8 12.5 8 9.5C8 7.567 9.567 6 11.5 6H12.5C14.433 6 16 7.567 16 9.5C16 12.5 12 15.5 12 15.5Z" stroke="currentColor" stroke-width="1.5"/>
                                            <circle cx="12" cy="9.5" r="1.5" fill="currentColor"/>
                                            <path d="M8 18H16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                        </svg>
                                        <span>Custom</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </details>

                    <!-- Code Blocks Section -->
                    <details class="style-section">
                        <summary class="section-header" aria-label="Code block settings">
                            <svg class="section-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                                <path d="M5.5 4L2 8L5.5 12M10.5 4L14 8L10.5 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Code Blocks
                        </summary>
                        <div class="section-content">
                            <!-- Max Height -->
                            <div class="control-row">
                                <label class="control-label" id="codeHeightLabel">Max Height</label>
                                <div class="control-buttons" role="radiogroup" aria-labelledby="codeHeightLabel">
                                    <button class="option-btn" data-value="200" data-setting="codeBlockMaxHeight" role="radio" aria-checked="false">200px</button>
                                    <button class="option-btn active" data-value="400" data-setting="codeBlockMaxHeight" role="radio" aria-checked="true">400px</button>
                                    <button class="option-btn" data-value="600" data-setting="codeBlockMaxHeight" role="radio" aria-checked="false">600px</button>
                                    <button class="option-btn" data-value="0" data-setting="codeBlockMaxHeight" role="radio" aria-checked="false">None</button>
                                </div>
                            </div>

                            <!-- Word Wrap -->
                            <div class="control-row">
                                <label for="codeWrapToggle" class="control-label">Word Wrap</label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="codeWrapToggle" class="toggle-input" aria-label="Enable code block word wrap">
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>

                            <!-- Collapse All -->
                            <div class="control-row">
                                <label class="control-label">Code Blocks</label>
                                <button class="action-btn" id="toggleCodeBlocksBtn" aria-label="Expand or collapse all code blocks">
                                    <svg viewBox="0 0 16 16" fill="none" aria-hidden="true">
                                        <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    <span id="toggleCodeBlocksText">Collapse All</span>
                                </button>
                            </div>
                        </div>
                    </details>

                    <!-- Visual Tweaks Section -->
                    <details class="style-section">
                        <summary class="section-header" aria-label="Visual tweaks settings">
                            <svg class="section-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                                <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M8 5V8L10 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            Visual Tweaks
                        </summary>
                        <div class="section-content">
                            <!-- Show Timestamps -->
                            <div class="control-row">
                                <label for="showTimestampsToggle" class="control-label">Show Timestamps</label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="showTimestampsToggle" class="toggle-input" checked aria-label="Show message timestamps">
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>

                            <!-- Show Avatars -->
                            <div class="control-row">
                                <label for="showAvatarsToggle" class="control-label">Show Avatars</label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="showAvatarsToggle" class="toggle-input" checked aria-label="Show user and Claude avatars">
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>

                            <!-- Bubble Style -->
                            <div class="control-row">
                                <label class="control-label" id="bubbleStyleLabel">Bubble Style</label>
                                <div class="control-buttons" role="radiogroup" aria-labelledby="bubbleStyleLabel">
                                    <button class="option-btn active" data-value="rounded" data-setting="messageBubbleStyle" role="radio" aria-checked="true">Rounded</button>
                                    <button class="option-btn" data-value="square" data-setting="messageBubbleStyle" role="radio" aria-checked="false">Square</button>
                                    <button class="option-btn" data-value="minimal" data-setting="messageBubbleStyle" role="radio" aria-checked="false">Minimal</button>
                                </div>
                            </div>
                        </div>
                    </details>

                    <!-- Reset All Styles Button -->
                    <div class="reset-all-section">
                        <button class="btn btn-danger btn-full" id="resetAllStylesBtn" aria-label="Reset all styling options to their default values">
                            <svg class="btn-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                                <path d="M2 8C2 4.68629 4.68629 2 8 2C10.0503 2 11.8764 2.98939 13 4.51472V2.5H14V6.5H10V5.5H12.2678C11.3049 4.01099 9.75932 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13C10.0902 13 11.8829 11.6736 12.6177 9.80036L13.5545 10.1996C12.6555 12.4888 10.5073 14 8 14C4.68629 14 2 11.3137 2 8Z" fill="currentColor"/>
                            </svg>
                            Reset All Styles
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer Actions -->
        <footer class="popup-footer">
            <button class="btn btn-secondary"
                    id="resetBtn"
                    title="Reset to default (85%). Press R for shortcut."
                    aria-label="Reset to default 85 percent width. Press R for shortcut.">
                <svg class="btn-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                    <path d="M2 8C2 4.68629 4.68629 2 8 2C10.0503 2 11.8764 2.98939 13 4.51472V2.5H14V6.5H10V5.5H12.2678C11.3049 4.01099 9.75932 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13C10.0902 13 11.8829 11.6736 12.6177 9.80036L13.5545 10.1996C12.6555 12.4888 10.5073 14 8 14C4.68629 14 2 11.3137 2 8Z" fill="currentColor"/>
                </svg>
                Reset
            </button>
            <button class="btn btn-primary"
                    id="applyBtn"
                    title="Apply changes"
                    aria-label="Apply current width setting">
                <svg class="btn-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                    <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z" fill="currentColor"/>
                </svg>
                Apply
            </button>
        </footer>

        <!-- Info Tooltip -->
        <div class="info-section">
            <details class="info-details">
                <summary class="info-summary" aria-expanded="false">
                    <svg class="info-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                        <path d="M8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1ZM8 2C11.3137 2 14 4.68629 14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2ZM8 5C7.44772 5 7 5.44772 7 6C7 6.55228 7.44772 7 8 7C8.55228 7 9 6.55228 9 6C9 5.44772 8.55228 5 8 5ZM7 8V12H9V8H7Z" fill="currentColor"/>
                    </svg>
                    <span>About this extension</span>
                </summary>
                <div class="info-content">
                    <p>Adjusts the width of the main chat area on claude.ai. This affects the conversation messages and input box, <strong>not</strong> the sidebar.</p>
                    <p>Changes apply immediately to all open Claude tabs.</p>
                    <p class="keyboard-hint">
                        <strong>Keyboard shortcuts:</strong> 1-4 for presets, R to reset, Esc to close.
                        <br>
                        <strong>Global shortcuts:</strong> Alt+Shift+W (open), Alt+Shift+C (cycle), Alt+Shift+D (toggle).
                        <br>
                        <strong>Context menu:</strong> Right-click on claude.ai for quick access to presets.
                    </p>
                </div>
            </details>
        </div>

        <!-- Edit Preset Modal (hidden by default) -->
        <div class="modal-overlay" id="editPresetModal" hidden>
            <div class="modal" role="dialog" aria-labelledby="editModalTitle" aria-modal="true">
                <h2 class="modal-title" id="editModalTitle">Edit Preset</h2>
                <div class="modal-body">
                    <label for="editPresetName" class="modal-label">Preset Name</label>
                    <input type="text"
                           id="editPresetName"
                           class="preset-name-input"
                           maxlength="20"
                           aria-describedby="editNameHint">
                    <span id="editNameHint" class="input-hint">Max 20 characters</span>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-small btn-danger" id="deletePresetBtn" aria-label="Delete this preset">
                        Delete
                    </button>
                    <div class="modal-actions-right">
                        <button class="btn btn-small btn-secondary" id="cancelEditBtn" aria-label="Cancel editing">
                            Cancel
                        </button>
                        <button class="btn btn-small btn-primary" id="saveEditBtn" aria-label="Save changes">
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../lib/constants.js"></script>
    <script src="popup.js"></script>
</body>
</html>
